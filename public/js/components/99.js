(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{LSXG:function(t,e,a){"use strict";a.r(e);var i=a("L2JU"),s=a("Ll3F"),n=a("xuR2"),r=a("k30Q"),c=a("s20v"),o=a("8MVx"),l=a("Ocez");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){p(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function p(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var m={components:{DataViewer:c.a,appModal:o.a,checkValue:l.a},props:["title","kelas"],data:function(){return{selectedItem:[],query:{order_column:"perspektif",order_direction:"desc",filter_match:"and",limit:10,page:1},excelDownloadUrl:"",columnData:[{title:"No.",name:"No."},{title:"Status",name:"status",hide:!1},{title:"Rekomendasi",name:"monitoring_rekom_count",sort:!1,hide:!1,disable:!1,filter:!1},{title:"Tercapai",name:"monitoring_rekom_ok_count",sort:!1,hide:!1,disable:!1,filter:!1},{title:"Keputusan",name:"monitoring_pencapaian_count",sort:!1,hide:!1,disable:!1,filter:!1},{title:"Temuan",name:"name",tipe:"string",sort:!0,hide:!1,disable:!1,filter:!0,filterDefault:!0},{title:"CU",name:"cu.name",sort:!1,hide:!1,disable:!1,filter:!0},{title:"TP",name:"tp.name",sort:!1,hide:!1,disable:!1,filter:!0},{title:"Jenis",name:"jenis",sort:!0,hide:!1,disable:!1,filter:!0},{title:"Perspektif",name:"perspektif",sort:!0,hide:!1,disable:!1,filter:!0},{title:"PIC CU",name:"aktivis_cu.name",sort:!1,hide:!1,disable:!1,filter:!0},{title:"PIC BKCU",name:"aktivis_bkcu.name",sort:!1,hide:!1,disable:!1,filter:!0},{title:"Tgl. Monitoring",name:"tanggal",tipe:"date",sort:!0,hide:!1,disable:!1,filter:!0},{title:"Tgl. / Waktu Buat",name:"created_at",tipe:"datetime",sort:!0,hide:!1,disable:!1,filter:!0},{title:"Tgl. / Waktu Ubah",name:"updated_at",tipe:"datetime",sort:!0,hide:!1,disable:!1,filter:!0}],state:"",modalShow:!1,modalState:"",modalTitle:"",modalContent:"",modalButton:""}},created:function(){this.fetch(this.query)},watch:{$route:function(t,e){this.fetch(this.query)},updateStat:function(t){this.modalState=t,this.modalButton="Ok","success"==t?(this.modalTitle=this.updateMessage.message,this.modalContent="",this.fetch()):this.modalContent="fail"==t?this.updateMessage:""}},methods:{fetch:function(t){"semua"==this.$route.params.cu?(this.disableColumnCu(!1),this.$store.dispatch(this.kelas+"/index",t),this.excelDownloadUrl=this.kelas):(this.disableColumnCu(!0),this.$store.dispatch(this.kelas+"/indexCu",[t,this.$route.params.cu,this.$route.params.tp]),this.excelDownloadUrl=this.kelas+"/indexCu/"+this.$route.params.cu+"/"+this.$route.params.tp)},disableColumnCu:function(t){this.columnData[6].disable=t},selectedRow:function(t){this.selectedItem=t},goTo:function(t,e){"edit"==e?this.$router.push({name:this.kelas+"Edit",params:{id:t}}):this.$router.push({name:this.kelas+"Detail",params:{id:t}})},modalConfirmOpen:function(t,e,a){this.modalShow=!0,this.modalState="confirm-tutup",this.state=t,e&&(this.selectedItem=a),"hapus"==t&&(this.modalTitle="Hapus "+this.title+" "+this.selectedItem.name+" ?",this.modalButton="Iya, Hapus")},modalTutup:function(){this.modalShow=!1,this.$store.dispatch(this.kelas+"/resetUpdateStat")},modalConfirmOk:function(){"hapus"==this.state?this.$store.dispatch(this.kelas+"/destroy",this.selectedItem.id):"updateTerbitkan"==this.state?this.$store.dispatch(this.kelas+"/updateTerbitkan",this.selectedItem.id):"updateUtamakan"==this.state&&this.$store.dispatch(this.kelas+"/updateUtamakan",this.selectedItem.id)}},computed:d(d({},Object(i.b)("auth",{currentUser:"currentUser"})),Object(i.b)("monitoring",{itemData:"dataS",itemDataStat:"dataStatS",updateMessage:"update",updateStat:"updateStat"}))},h=a("KHd+"),_=Object(h.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("data-viewer",{attrs:{title:t.title,columnData:t.columnData,itemData:t.itemData,query:t.query,itemDataStat:t.itemDataStat,excelDownloadUrl:t.excelDownloadUrl},on:{fetch:t.fetch},scopedSlots:t._u([{key:"item-desktop",fn:function(e){return[a("tr",{staticClass:"text-nowrap",class:{"bg-info":t.selectedItem.id==e.item.id},on:{click:function(a){return t.selectedRow(e.item)}}},[t.columnData[0].hide?t._e():a("td",[t._v("\n\t\t\t\t\t"+t._s(e.index+1+(+t.itemData.current_page-1)*+t.itemData.per_page+".")+"\n\t\t\t\t")]),t._v(" "),t.columnData[1].hide?t._e():a("td",[a("div",{staticClass:"progress"},[a("div",{staticClass:"progress-bar-striped bg-orange",style:{width:Math.round(e.item.monitoring_rekom_ok_count/e.item.monitoring_rekom_count*100)+"%"}},[a("span",{staticClass:"text-default font-size-lg"},[t._v("\n\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t"+t._s(Math.round(e.item.monitoring_rekom_ok_count/e.item.monitoring_rekom_count*100)+"%")+"\n\t\t\t\t\t\t\t\t          \n\t\t\t\t\t\t\t")])])])]),t._v(" "),t.columnData[2].hide?t._e():a("td",[a("check-value",{attrs:{value:e.item.monitoring_rekom_count}})],1),t._v(" "),t.columnData[3].hide?t._e():a("td",[a("check-value",{attrs:{value:e.item.monitoring_rekom_ok_count}})],1),t._v(" "),t.columnData[4].hide?t._e():a("td",[a("check-value",{attrs:{value:e.item.monitoring_pencapaian_count}})],1),t._v(" "),t.columnData[5].hide?t._e():a("td",[a("check-value",{attrs:{value:e.item.name}})],1),t._v(" "),t.columnData[6].hide||t.columnData[6].disable?t._e():a("td",[e.item.cu?a("check-value",{attrs:{value:e.item.cu.name}}):a("span",[t._v("-")])],1),t._v(" "),t.columnData[7].hide?t._e():a("td",[e.item.tp?a("check-value",{attrs:{value:e.item.tp.name}}):0==e.item.id_tp?a("span",[t._v("Semua")]):a("span",[t._v("-")])],1),t._v(" "),t.columnData[8].hide?t._e():a("td",["MAYOR"==e.item.jenis?a("span",{staticClass:"badge badge-danger"},[t._v(t._s(e.item.jenis))]):"MINOR"==e.item.jenis?a("span",{staticClass:"badge badge-success"},[t._v(t._s(e.item.jenis))]):t._e()]),t._v(" "),t.columnData[9].hide?t._e():a("td",[a("check-value",{attrs:{value:e.item.perspektif}})],1),t._v(" "),t.columnData[10].hide?t._e():a("td",[e.item.aktivis_cu?a("check-value",{attrs:{value:e.item.aktivis_cu.name}}):a("span",[t._v("-")])],1),t._v(" "),t.columnData[11].hide?t._e():a("td",[e.item.aktivis_bkcu?a("check-value",{attrs:{value:e.item.aktivis_bkcu.name}}):a("span",[t._v("-")])],1),t._v(" "),t.columnData[12].hide?t._e():a("td",{domProps:{innerHTML:t._s(t.$options.filters.date(e.item.tanggal))}}),t._v(" "),t.columnData[13].hide?t._e():a("td",{domProps:{innerHTML:t._s(t.$options.filters.dateTime(e.item.created_at))}}),t._v(" "),t.columnData[14].hide?t._e():a("td",[e.item.created_at!==e.item.updated_at?a("span",{domProps:{innerHTML:t._s(t.$options.filters.dateTime(e.item.updated_at))}}):a("span",[t._v("-")])])])]}}])},[a("template",{slot:"button-desktop"},[t.currentUser.can&&t.currentUser.can["create_"+t.kelas]&&0==t.currentUser.id_cu?a("router-link",{staticClass:"btn btn-light mb-1",attrs:{to:{name:t.kelas+"Create"}}},[a("i",{staticClass:"icon-plus3"}),t._v(" Tambah\n\t\t\t")]):t._e(),t._v(" "),t.currentUser.can&&t.currentUser.can["update_"+t.kelas]&&0==t.currentUser.id_cu?a("button",{staticClass:"btn btn-light mb-1",attrs:{disabled:!t.selectedItem.id},on:{click:function(e){return e.preventDefault(),t.goTo(t.selectedItem.id,"edit")}}},[a("i",{staticClass:"icon-pencil5"}),t._v(" Ubah\n\t\t\t")]):t._e(),t._v(" "),t.currentUser.can&&t.currentUser.can["update_"+t.kelas]?a("button",{staticClass:"btn btn-light btn-icon mb-1",attrs:{disabled:!t.selectedItem.id},on:{click:function(e){return e.preventDefault(),t.goTo(t.selectedItem.id,"detail")}}},[a("i",{staticClass:"icon-stack2"}),t._v(" Detail\n\t\t\t")]):t._e(),t._v(" "),t.currentUser.can&&t.currentUser.can["destroy_"+t.kelas]&&0==t.currentUser.id_cu?a("button",{staticClass:"btn btn-light mb-1",attrs:{disabled:!t.selectedItem.id},on:{click:function(e){return e.preventDefault(),t.modalConfirmOpen("hapus")}}},[a("i",{staticClass:"icon-bin2"}),t._v(" Hapus\n\t\t\t")]):t._e()],1),t._v(" "),a("template",{slot:"button-mobile"},[t.currentUser.can&&t.currentUser.can["create_"+t.kelas]&&0==t.currentUser.id_cu?a("router-link",{staticClass:"btn btn-light btn-block mb-1",attrs:{to:{name:t.kelas+"Create"}}},[a("i",{staticClass:"icon-plus3"}),t._v(" Tambah\n\t\t\t")]):t._e(),t._v(" "),t.currentUser.can&&t.currentUser.can["update_"+t.kelas]&&0==t.currentUser.id_cu?a("button",{staticClass:"btn btn-light btn-block mb-1",attrs:{disabled:!t.selectedItem.id},on:{click:function(e){return e.preventDefault(),t.goTo(t.selectedItem.id,"edit")}}},[a("i",{staticClass:"icon-pencil5"}),t._v(" Ubah\n\t\t\t")]):t._e(),t._v(" "),t.currentUser.can&&t.currentUser.can["update_"+t.kelas]?a("button",{staticClass:"btn btn-light btn-icon btn-block mb-1",attrs:{disabled:!t.selectedItem.id},on:{click:function(e){return e.preventDefault(),t.goTo(t.selectedItem.id,"detail")}}},[a("i",{staticClass:"icon-stack2"}),t._v(" Detail\n\t\t\t")]):t._e(),t._v(" "),t.currentUser.can&&t.currentUser.can["destroy_"+t.kelas]&&0==t.currentUser.id_cu?a("button",{staticClass:"btn btn-light btn-block mb-1",attrs:{disabled:!t.selectedItem.id},on:{click:function(e){return e.preventDefault(),t.modalConfirmOpen("hapus")}}},[a("i",{staticClass:"icon-bin2"}),t._v(" Hapus\n\t\t\t")]):t._e()],1)],2),t._v(" "),a("app-modal",{attrs:{show:t.modalShow,state:t.modalState,title:t.modalTitle,content:t.modalContent,button:t.modalButton},on:{tutup:t.modalTutup,confirmOk:t.modalConfirmOk,successOk:t.modalTutup,failOk:t.modalTutup,backgroundClick:t.modalTutup}})],1)}),[],!1,null,null,null).exports;function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function v(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(Object(a),!0).forEach((function(e){f(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function f(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var g={components:{pageHeader:s.a,message:n.a,selectData:r.a,tableData:_},data:function(){return{title:"Monitoring",kelas:"monitoring",titleDesc:"Mengelola data monitoring",titleIcon:"icon-collaboration",selectCuPath:"monitoringCu"}},created:function(){this.checkUser("index_monitoring",this.$route.params.cu)},methods:{checkUser:function(t,e){this.currentUser&&(this.currentUser.can&&this.currentUser.can[t]||this.$router.push("/notFound"),e&&!this.currentUser.id_cu||0!=this.currentUser.id_cu&&this.currentUser.id_cu!=e&&this.$router.push("/notFound"))}},computed:v(v({},Object(i.b)("auth",{currentUser:"currentUser"})),Object(i.b)("artikel",{itemData:"dataS",itemDataStat:"dataStatS"}))},k=Object(h.a)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("page-header",{attrs:{title:t.title,titleDesc:t.titleDesc,titleIcon:t.titleIcon}}),t._v(" "),a("div",{staticClass:"page-content pt-0"},[a("div",{staticClass:"content-wrapper"},[a("div",{staticClass:"content"},["fail"===t.itemDataStat?a("message",{attrs:{title:"Oops terjadi kesalahan:",errorData:t.itemData}}):t._e(),t._v(" "),a("select-data",{attrs:{kelas:t.kelas,path:t.selectCuPath,isPus:!1}}),t._v(" "),a("table-data",{attrs:{title:t.title,kelas:t.kelas}})],1)])])],1)}),[],!1,null,null,null);e.default=k.exports},k30Q:function(t,e,a){"use strict";var i=a("L2JU");function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function n(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var c={props:["kelas","isPus","path"],data:function(){return{cu_id:"",tp_id:""}},created:function(){void 0!==this.currentUser.id_pus&&(this.fetchCU(),"success"==this.modelCuStat&&this.fetchTp())},watch:{$route:function(t,e){this.fetchCU(),"success"==this.modelCuStat&&this.fetchTp()},modelCuStat:function(t){"success"===t&&(this.cu_id=this.$route.params.cu,this.fetchTp())},modelTpStat:function(t){"success"===t&&(this.tp_id=this.$route.params.tp)}},methods:{fetchCU:function(){0==this.modelCu.length?this.$store.dispatch("cu/getHeader",this.currentUser.id_pus):this.cu_id=this.$route.params.cu},fetchTp:function(){this.$store.dispatch("tp/getCu",this.cu_id)},changeCU:function(t){this.fetchTp(),"semua"!=this.$route.params.tp?this.$router.push({name:this.path,params:{cu:this.cu_id,tp:this.$route.params.tp}}):this.$router.push({name:this.path,params:{cu:this.cu_id,tp:"semua"}})},changeTp:function(t){this.$router.push({name:this.path,params:{cu:this.cu_id,tp:this.tp_id}})}},computed:n(n(n({},Object(i.b)("auth",{currentUser:"currentUser"})),Object(i.b)("cu",{modelCu:"headerDataS",modelCuStat:"headerDataStatS",updateMessage:"update",updateStat:"updateStat"})),Object(i.b)("tp",{modelTp:"dataS",modelTpStat:"dataStatS"}))},o=a("KHd+"),l=Object(o.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"card d-print-none"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[0==t.currentUser.id_cu?a("div",{staticClass:"mb-2",class:{"col-md-6":"semua"!=t.cu_id,"col-md-12":"semua"==t.cu_id}},[a("div",{staticClass:"input-group"},[t._m(0),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.cu_id,expression:"cu_id"}],staticClass:"form-control",attrs:{name:"cu_id","data-width":"100%",disabled:"loading"===t.modelCuStat},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.cu_id=e.target.multiple?a:a[0]},function(e){return t.changeCU(e.target.value)}]}},[a("option",{attrs:{disabled:"",value:""}},[t._v("Silahkan pilih CU")]),t._v(" "),t._t("default"),t._v(" "),a("option",{attrs:{value:"semua"}},[t._v("Semua CU")]),t._v(" "),t.isPus?a("option",{attrs:{value:"0"}},[t.currentUser.pus?a("span",[t._v(t._s(t.currentUser.pus.name))]):a("span",[t._v("PUSKOPCUINA")])]):t._e(),t._v(" "),a("option",{attrs:{disabled:"",value:""}},[t._v("----------------")]),t._v(" "),t._l(t.modelCu,(function(e){return e?a("option",{domProps:{value:e.id}},[t._v(t._s(e.name))]):t._e()}))],2),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-light",attrs:{disabled:"loading"===t.modelCuStat},on:{click:t.fetchCU}},[a("i",{staticClass:"icon-sync",class:{spinner:"loading"===t.modelCuStat}})])])])]):t._e(),t._v(" "),"semua"!=t.cu_id?a("div",{class:{"col-md-6":0==t.currentUser.id_cu,"col-md-12":0!=t.currentUser.id_cu}},[a("div",{staticClass:"input-group"},[t._m(1),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tp_id,expression:"tp_id"}],staticClass:"form-control",attrs:{name:"tp","data-width":"100%",disabled:"loading"===t.modelTpStat},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.tp_id=e.target.multiple?a:a[0]},function(e){return t.changeTp(e.target.value)}]}},[a("option",{attrs:{disabled:"",value:""}},[t._v("Silahkan pilih TP/KP")]),t._v(" "),a("option",{attrs:{value:"semua"}},[t._v("Semua Tp")]),t._v(" "),a("option",{attrs:{disabled:"",value:""}},[t._v("----------------")]),t._v(" "),t._l(t.modelTp,(function(e){return e?a("option",{domProps:{value:e.id}},[t._v(t._s(e.name))]):t._e()}))],2),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-light",attrs:{disabled:"loading"===t.modelTpStat},on:{click:t.fetchTp}},[a("i",{staticClass:"icon-sync",class:{spinner:"loading"===t.modelTpStat}})])])])]):t._e()])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("Pilih CU")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("Pilih TP/KP")])])}],!1,null,null,null);e.a=l.exports}}]);